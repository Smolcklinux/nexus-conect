<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nexus Conect | Conexão Segura</title>
    
    <meta http-equiv="Content-Security-Policy" 
          content="default-src 'self'; 
                   script-src 'self' 'unsafe-inline' https://cdn.jsdelivr.net https://wudbjohhxzqqxxwhoche.supabase.co; 
                   connect-src 'self' https://wudbjohhxzqqxxwhoche.supabase.co https://api.ipify.org; 
                   img-src 'self' data: https://wudbjohhxzqqxxwhoche.supabase.co; 
                   style-src 'self' 'unsafe-inline' https://fonts.googleapis.com;">

    <link rel="stylesheet" href="./css/main.css">
    <link rel="stylesheet" href="./css/auth.css">
    <link rel="stylesheet" href="./css/components.css">
    <link rel="stylesheet" href="./css/chat.css">

    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>
<body>

    <div id="loading-screen">
        <div class="loader"></div>
        <p id="loading-status">Verificando segurança...</p>
    </div>

    <div id="auth-section" class="hidden">
        <div class="auth-container">
            <div class="ban-card">
                <h1 id="auth-title">Entrar no Nexus</h1>
                
                <div id="login-form">
                    <input type="email" id="login-email" placeholder="E-mail" class="auth-input">
                    <input type="password" id="login-password" placeholder="Senha" class="auth-input">
                    <button id="btn-login" class="btn-recorrer">ACESSAR SISTEMA</button>
                    <p style="margin-top:15px; cursor:pointer" onclick="toggleAuth()">
                        Não tem conta? <span style="color:var(--nexus-accent)">Cadastre-se</span>
                    </p>
                </div>

                <div id="register-form" class="hidden">
                    <input type="text" id="reg-username" placeholder="Nome de Usuário" class="auth-input">
                    <input type="email" id="reg-email" placeholder="E-mail" class="auth-input">
                    <input type="password" id="reg-password" placeholder="Senha" class="auth-input">
                    <button id="btn-register" class="btn-recorrer">CRIAR CONTA</button>
                    <p style="margin-top:15px; cursor:pointer" onclick="toggleAuth()">
                        Já tem conta? <span style="color:var(--nexus-accent)">Fazer Login</span>
                    </p>
                </div>
            </div>
        </div>
    </div>

    <div id="app-section" class="hidden">
        <div class="chat-wrapper">
            <div class="side-panel">
                <div class="header" style="padding:20px;">
                    <h3>Amigos</h3>
                </div>
                <div id="friends-list" class="friends-list"></div>
                <button id="btn-logout" class="btn-sair" style="margin:10px;">Sair</button>
            </div>
            
            <div class="main-chat">
                <div class="chat-header">
                    <span id="current-room-name">Lobby Principal</span>
                </div>
                <div id="messages-container" class="messages-container"></div>
                <div class="input-area">
                    <input type="text" id="chat-input" placeholder="Digite sua mensagem..." class="chat-input">
                    <button id="btn-send" class="btn-primary">Enviar</button>
                </div>
            </div>
        </div>
    </div>

    <script type="module" src="./js/config.js"></script>
    <script type="module" src="./js/main.js"></script>
</body>
</html>
