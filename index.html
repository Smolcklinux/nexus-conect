<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nexus Conect | Nebulosa & Voice</title>
    <link rel="stylesheet" href="./css/auth.css">
    <link rel="stylesheet" href="./css/main.css">
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <style>
        .password-wrapper { position: relative; width: 100%; }
        .toggle-password { position: absolute; right: 15px; top: 50%; transform: translateY(-50%); background: none; border: none; color: var(--cyan-neon); cursor: pointer; font-size: 14px; opacity: 0.6; z-index: 10; }
        .hidden { display: none !important; }
        /* Nebulosa Styles */
        .nebula-background { width: 100vw; height: 100vh; background: radial-gradient(circle at center, #0a0a15 0%, #050505 100%); position: relative; overflow: hidden; }
        .user-bubble { position: absolute; width: 65px; height: 65px; border-radius: 50%; border: 2px solid var(--cyan-neon); cursor: pointer; transition: 0.3s; animation: float-nebula 8s infinite ease-in-out; z-index: 10; }
        .user-bubble img { width: 100%; height: 100%; border-radius: 50%; object-fit: cover; }
        @keyframes float-nebula { 0%, 100% { transform: translate(0,0); } 50% { transform: translate(15px, -20px); } }
        .bottom-nav { position: fixed; bottom: 20px; left: 50%; transform: translateX(-50%); display: flex; gap: 15px; z-index: 100; }
    </style>
</head>
<body>

    <div id="loading-screen" class="loading-overlay">
        <div class="loader"></div>
        <p>NEXUS SYSTEM LOADING...</p>
    </div>

    <div id="home-nebula" class="auth-container hidden">
        <div class="nebula-background">
            <div id="online-users-container"></div>
            <div class="bottom-nav">
                <button id="btn-create-room-trigger" class="btn-outline-cyan" style="width: auto; padding: 10px 20px;">CRIAR SALA</button>
                <button id="btn-logout-nebula" class="btn-outline-purple" style="width: auto; padding: 10px 20px;">SAIR</button>
            </div>
        </div>
    </div>

    <div id="app-section" class="auth-container hidden">
        <div class="glass-card stage-canvas">
            <div class="stage-header">
                <div class="room-id-badge">ID: <span id="display-room-id">---</span></div>
                <button id="btn-leave-room" style="background:none; border:none; color:var(--purple-neon); font-size:10px; cursor:pointer;">SAIR DA SALA</button>
            </div>
            <div class="slots-grid" id="voice-stage-slots">
                <div class="slot-node"><div class="slot" id="slot-0"></div><span class="slot-label">HOST</span></div>
                <div class="slot-node"><div class="slot" id="slot-1"></div><span class="slot-label">01</span></div>
                <div class="slot-node"><div class="slot" id="slot-2"></div><span class="slot-label">02</span></div>
                <div class="slot-node"><div class="slot" id="slot-3"></div><span class="slot-label">03</span></div>
                <div class="slot-node"><div class="slot" id="slot-4"></div><span class="slot-label">04</span></div>
                <div class="slot-node"><div class="slot" id="slot-5"></div><span class="slot-label">05</span></div>
            </div>
            <div class="stage-controls">
                <button id="btn-mic-toggle" class="btn-mic">MIC</button>
            </div>
        </div>
    </div>

    <div id="profile-modal" class="profile-card-overlay hidden">
        <div class="profile-card">
            <span onclick="document.getElementById('profile-modal').classList.add('hidden')" class="close-card">Ã—</span>
            <img src="" id="p-card-avatar" class="avatar-large">
            <h3 id="p-card-nick">@username</h3>
            <p id="p-card-bio">Nenhuma bio definida.</p>
            <button id="btn-open-chat" class="btn-outline-cyan">MENSAGEM PRIVADA</button>
        </div>
    </div>

    <div id="chat-modal" class="profile-card-overlay hidden">
        <div class="profile-card" style="width: 320px; height: 450px; display: flex; flex-direction: column;">
            <h4 id="chat-partner-name">@user</h4>
            <div id="chat-messages-box" style="flex: 1; overflow-y: auto; margin: 10px 0; border-top: 1px solid #222;"></div>
            <div style="display: flex; gap: 5px;">
                <input type="text" id="chat-input" class="nexus-input" placeholder="Mensagem...">
                <button id="btn-send-msg" class="btn-outline-cyan" style="width: 60px; padding: 0;">></button>
            </div>
        </div>
    </div>

    <script type="module" src="./js/main.js"></script>
</body>
</html>
